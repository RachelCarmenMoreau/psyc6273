function smallRect = centrerect( bigRect, imageDim )% CENTRERECT  Calculate the rectangle coordinates that centre%             an image in a larger rectangle%% smallRect = centrerect( bigRect, imageDim )% how big is the larger rectangle?bigRectSize = [ bigRect(3)-bigRect(1) bigRect(4)-bigRect(2) ];% make a rectangle the size of the image, fitted into the top left corner% of the outer rectangletopLeftRect = [ bigRect(1:2) bigRect(1:2)+[ imageDim(2) imageDim(2) ] ];% how much do we have to shift topLeftRect so that it's centred in the% outer rectangle?offset = ceil((bigRectSize-[ imageDim(2) imageDim(1) ])/2);% shift itsmallRect = topLeftRect + [ offset offset ];return